{"componentChunkName":"component---src-templates-documentation-page-js","path":"/dev/analytics/","result":{"data":{"markdownRemark":{"html":"<p><a href=\"https://matomo.org/\">Matomo</a> is an open source analytics platform.\nWe host an instance of Matomo as part of Crossfeed to collect analytics on its usage.</p>\n<p>Matomo requires both an instance to host it and a MariaDB database.\nWhen running Matomo locally, we run it using the <code class=\"language-text\">crossfeed_matomo_1</code>\nand <code class=\"language-text\">crossfeed_matomodb_1</code> Docker containers. When deployed, we run\nMatomo on AWS Fargate and use RDS to host the Matomo DB instance.</p>\n<p>Only <code class=\"language-text\">globalAdmin</code> users can currently access Matomo. When accessing Matomo, you must use\na separate shared username and password (in addition to the standard global admin authentication).</p>\n<h3 id=\"directory-structure\" style=\"position:relative;\"><a href=\"#directory-structure\" aria-label=\"directory structure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Directory structure</h3>\n<p>The file <code class=\"language-text\">infrastructure/matomo.tf</code> contains the Terraform infrastructure needed for deploying Matomo.</p>\n<h3 id=\"setting-up-matomo-locally\" style=\"position:relative;\"><a href=\"#setting-up-matomo-locally\" aria-label=\"setting up matomo locally permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up Matomo locally</h3>\n<p>Before you run Matomo for the first time locally, you must run <code class=\"language-text\">./setup-matomo.sh</code>.</p>\n<p>You can access Matomo by clicking on the \"Matomo\" button from the \"My Account\" page. Click\nthrough the original setup (keep the default values for database connection, etc.),\nthen set the superuser username and password to \"root\" and \"password\" (for development only; for deployment to production, you should generate a random password).</p>\n<h3 id=\"matomo-proxy\" style=\"position:relative;\"><a href=\"#matomo-proxy\" aria-label=\"matomo proxy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Matomo proxy</h3>\n<p>The deployed Matomo instance isn't directly accessible to the Internet. Instead, all paths to the REST API\nthat begin with <code class=\"language-text\">/matomo</code> are proxied to the Matomo instance. The JWT stored in the <code class=\"language-text\">crossfeed-token</code>\ncookie is checked to ensure that the user is a global admin before the API proxies the user's request.</p>","frontmatter":{"title":"Matomo","sidenav":"dev"},"fields":{"slug":"/dev/analytics/"},"headings":[{"value":"Directory structure","depth":3},{"value":"Setting up Matomo locally","depth":3},{"value":"Matomo proxy","depth":3}]}},"pageContext":{"name":"/dev/analytics/"}},"staticQueryHashes":["1824138477","3841949133","63159454"]}