{"componentChunkName":"component---src-templates-documentation-page-js","path":"/dev/quickstart/","result":{"data":{"markdownRemark":{"html":"<p>This quickstart describes the initial setup required to run an instance of Crossfeed on your local computer.</p>\n<h3 id=\"initial-setup\" style=\"position:relative;\"><a href=\"#initial-setup\" aria-label=\"initial setup permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Initial Setup</h3>\n<ol>\n<li>Install <a href=\"https://nodejs.org/en/download/\">Node.js</a> 14 and <a href=\"https://docs.docker.com/compose/install/\">Docker Compose</a>. Make sure the Docker daemon is running.</li>\n<li>\n<p>Copy root <code class=\"language-text\">dev.env.example</code> file to a <code class=\"language-text\">.env</code> file.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cp</span> dev.env.example .env</code></pre></div>\n</li>\n<li>\n<p>Build the crossfeed-worker Docker image:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> backend <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">npm</span> run build-worker</code></pre></div>\n</li>\n<li>\n<p>Start the entire environment from the root directory:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> start</code></pre></div>\n</li>\n<li>\n<p>Generate the initial DB schema and populate it with sample data:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> backend\n<span class=\"token comment\"># Generate schema</span>\n<span class=\"token function\">npm</span> run syncdb\n<span class=\"token comment\"># Populate sample data</span>\n<span class=\"token function\">npm</span> run syncdb -- -d populate</code></pre></div>\n<p>If you ever need to drop and recreate the database, you can run <code class=\"language-text\">npm run syncdb -- -d dangerouslyforce</code>.</p>\n</li>\n<li>Navigate to <a href=\"http://localhost\">http://localhost</a> in a browser.</li>\n<li>Create an account on the <a href=\"https://staging.crossfeed.cyber.dhs.gov/signup?\">staging Crossfeed instance</a>. You can then log into your account running on localhost using this account.</li>\n<li>\n<p>Hot reloading for source files is enabled, but after changes to non-source code files stopping and starting Docker Compose is required. The following are examples of changes that will require restarting the environment:</p>\n<ul>\n<li>Frontend or backend dependency changes</li>\n<li>Backend changes to <code class=\"language-text\">serverless.yml</code> or <code class=\"language-text\">env.yml</code></li>\n<li>Environment variables in root <code class=\"language-text\">.env</code></li>\n</ul>\n</li>\n<li>Install <a href=\"https://www.robinwieruch.de/how-to-use-prettier-vscode\">Prettier</a> in your dev environment to format code on save.</li>\n</ol>\n<h3 id=\"running-tests\" style=\"position:relative;\"><a href=\"#running-tests\" aria-label=\"running tests permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Running tests</h3>\n<p>To run tests, first make sure you have already started Crossfeed with <code class=\"language-text\">npm start</code> (or, at bare minimum, that the database container is running). Then run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> backend\n<span class=\"token function\">npm</span> <span class=\"token builtin class-name\">test</span></code></pre></div>\n<p>If snapshot tests fail, update snapshots by running <code class=\"language-text\">npm test -- -u</code>.</p>\n<p>To run tests for the subset of worker code that is written in Python, you need to run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> -r worker/requirements.txt\npytest</code></pre></div>\n<p>To view a code coverage report (a minimum code coverage threshold is checked in CI), run <code class=\"language-text\">npm test -- --collectCoverage</code>. You can then view a HTML coverage report in the <code class=\"language-text\">coverage/lcov-report</code> directory.</p>\n<h3 id=\"monitoring-docker-containers\" style=\"position:relative;\"><a href=\"#monitoring-docker-containers\" aria-label=\"monitoring docker containers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monitoring Docker containers</h3>\n<p>To see which Docker containers are running, you can run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"command-line-prompt\"><span data-user=root data-host=localhost></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span class=\"token function\">docker</span> <span class=\"token function\">ps</span>\nCONTAINER ID        IMAGE                                                 COMMAND                  CREATED             STATUS              PORTS                                            NAMES\n2a155c5bb9ce        crossfeed_backend                                     <span class=\"token string\">\"docker-entrypoint.s…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">0.0</span>.0.0:3000-<span class=\"token operator\">></span><span class=\"token number\">3000</span>/tcp                           crossfeed_backend_1\n0177dff83a80        docker.elastic.co/elasticsearch/elasticsearch:7.9.0   <span class=\"token string\">\"/tini -- /usr/local…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">0.0</span>.0.0:9200-<span class=\"token operator\">></span><span class=\"token number\">9200</span>/tcp, <span class=\"token number\">0.0</span>.0.0:9300-<span class=\"token operator\">></span><span class=\"token number\">9300</span>/tcp   crossfeed_es_1\nc0f3dee36d5e        crossfeed_frontend                                    <span class=\"token string\">\"docker-entrypoint.s…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">0.0</span>.0.0:80-<span class=\"token operator\">></span><span class=\"token number\">3000</span>/tcp                             crossfeed_frontend_1\nf3491e1b547e        matomo:3.14.1                                         <span class=\"token string\">\"/entrypoint.sh apac…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">80</span>/tcp                                           crossfeed_matomo_1\nc3ed457a71d2        postgres:latest                                       <span class=\"token string\">\"docker-entrypoint.s…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">0.0</span>.0.0:5432-<span class=\"token operator\">></span><span class=\"token number\">5432</span>/tcp                           crossfeed_db_1\n98c14a4f8886        mariadb:10.5                                          <span class=\"token string\">\"docker-entrypoint.s…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">3306</span>/tcp                                         crossfeed_matomodb_1\n9f70dbdbe867        crossfeed_docs                                        <span class=\"token string\">\"docker-entrypoint.s…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">0.0</span>.0.0:4000-<span class=\"token operator\">></span><span class=\"token number\">4000</span>/tcp                           crossfeed_docs_1\n746956c514ed        bitnami/minio:2020.9.26                               <span class=\"token string\">\"/opt/bitnami/script…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">0.0</span>.0.0:9000-<span class=\"token operator\">></span><span class=\"token number\">9000</span>/tcp                           crossfeed_minio_1</code></pre></div>\n<p>You can then check the logs of a particular container by specifying a container's name with the <code class=\"language-text\">docker logs</code> command. For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> logs crossfeed_backend_1 --follow</code></pre></div>\n<h3 id=\"further-information\" style=\"position:relative;\"><a href=\"#further-information\" aria-label=\"further information permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Further information</h3>\n<p>To see more information about the design and development of each component of Crossfeed,\nsee the following links:</p>\n<ul>\n<li><a href=\"frontend.md\">Frontend</a> for the React frontend.</li>\n<li><a href=\"rest-api.md\">REST API</a> for the REST API.</li>\n<li><a href=\"database.md\">Database</a> for the database models stored in Postgres.</li>\n<li><a href=\"worker.md\">Worker</a> for the worker system and adding new scans and data sources.</li>\n<li><a href=\"search.md\">Search</a> for the search infrastructure and setup with Elasticsearch.</li>\n<li><a href=\"analytics.md\">Analytics</a> for the analytics setup with Matomo.</li>\n</ul>\n<h3 id=\"documentation\" style=\"position:relative;\"><a href=\"#documentation\" aria-label=\"documentation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Documentation</h3>\n<p>The documentation files are stored in the <code class=\"language-text\">docs</code> directory and served from a Gatsby site. To work on this, you should run <code class=\"language-text\">npm start</code> from before. You can then open up <a href=\"http://localhost:4000\">http://localhost:4000</a> in your browser to view the docs.</p>\n<p>The docs are based on the <a href=\"https://github.com/18F/federalist-uswds-gatsby\">federalist-uswds-gatsby</a> theme. See that repository for more information on additional theme customizations that can be done.</p>","frontmatter":{"title":"Quickstart","sidenav":"dev"},"fields":{"slug":"/dev/quickstart/"},"headings":[{"value":"Initial Setup","depth":3},{"value":"Running tests","depth":3},{"value":"Monitoring Docker containers","depth":3},{"value":"Further information","depth":3},{"value":"Documentation","depth":3}]}},"pageContext":{"name":"/dev/quickstart/"}},"staticQueryHashes":["1824138477","3841949133","63159454"]}